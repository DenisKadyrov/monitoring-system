**Nagios Core** - система мониторинга сети с открытым исходным кодом которая наблюдает за указанными хостами и сервисами.

## Плюсы
- Гибкость
- Множество написанных плагинов
- Возможность написания собственных плагинов
- Возможность тандема с другими системами
## Принцип работы
### Мониторинг удаленных сотов
Существует хост на котором настроена сама система мониторинга. На все удаленные хосты накатываются плагины для получения данных о хосте (Загрузка процессора, использование памяти, запущенные процессы, заполнение диска, авторизованные пользователи и т.д.)
Для того чтобы собрать данные мониторинга нужно запустить плагины на хостах. Для этого применяются разные способы, в зависимости от системы ([[NCPA Agent]] для Windows, [[NRPE]], [[NSCA]], [[NDOUtils]] для Unix)
![|800](https://assets.nagios.com/downloads/nagioscore/docs/nagioscore/4/en/images/xnrpe.png.pagespeed.ic.wFm4WFzkCQ.webp)
### Мониторинг публичных служб
Служба выглядит следующим образом: есть хост, а в хосте есть служба и мы хотим ее мониторить.
Для этого:
1. **Нужно определить хост на котором лежит служба**. Заходим в любой [[Конфигурационные файлы]] с директивой cfg_file и cfg_dir и прописываем: 
	```
	define host {
	    use         шаблон              ; выбераем шаблон по умолчанию
	    host_name   имя хоста;
	    alias       Псевдоним           ; Более длинное и описательное название
	    address     192.168.1.50        ; IP адрес хоста который будем мониторить
	    hostgroups  имя группы хоста    ; группы используются для более удобного                                                  управления хостами
	}
	```
	**Пример:**
	В файле с директивой cfg_file `hosts.cfg` прописываем
	```
	define host {
    use         generic-host; 
    host_name   remotehost; 
    alias       Some Remote Host; 
    address     192.168.1.50;
    hostgroups  allhosts; 
}
	```
2. **Определение сервиса на хосте**. Можно это сделать в  любом конфигурационном файле с директивой cfg_file или cfg_dir. В файле `commands.cfg` прописываем определение команды для использования плагина мониторинга сервиса (например check_http):
	```
	define command {
    name            check_http
    command_name    check_http
    command_line    $USER1$/check_http -I $HOSTADDRESS$ $ARG1$
    }
	```
	Далее определяем сервис в файле `service.cfg`: 
	```
	define service {
    use                 generic-service     ; шаблон по умолчанию
    host_name           remotehost
    service_description HTTP
    check_command       check_http
	}
	```
3. Перезагружаем nagios:
```
sudo service restart nagios
```
